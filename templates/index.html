<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sentiment Analyzer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <div class="bg-white shadow-lg rounded-2xl p-8 max-w-md w-full">
    <h2 class="text-2xl font-bold text-center mb-6 text-blue-600">üé≠ Sentiment Analyzer</h2>

    <form id="sentiment-form" class="flex flex-col gap-4">
      <input
        type="text"
        id="comment"
        name="comment"
        placeholder="Enter your comment"
        required
        class="p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400"
      />
      <button
        type="submit"
        class="bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-xl transition duration-200"
      >
        Analyze
      </button>
    </form>

    <div
      id="result"
      class="mt-6 text-center text-lg font-medium text-gray-700"
    ></div>
  </div>

  <script>
    const form = document.getElementById('sentiment-form');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const comment = document.getElementById('comment').value.trim();

      if (!comment) {
        document.getElementById('result').innerText = '‚ö†Ô∏è Please enter a comment.';
        return;
      }

      document.getElementById('result').innerText = 'Analyzing... ‚è≥';

      try {
        const response = await fetch('/predict', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({comment})
        });

        const data = await response.json();
        document.getElementById('result').innerHTML = data.error
          ? `<span class="text-red-500">‚ùå Error: ${data.error}</span>`
          : `<span class="text-green-600">‚úÖ Sentiment: <b>${data.sentiment}</b></span><br/>Confidence: ${(data.confidence * 100).toFixed(1)}%`;
      } catch (err) {
        document.getElementById('result').innerHTML =
          `<span class="text-red-500">‚ùå Failed to connect to server.</span>`;
      }
    });
  </script>
</body>
</html>
